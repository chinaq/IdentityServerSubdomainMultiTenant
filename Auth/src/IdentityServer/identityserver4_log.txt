2020-05-24 15:13:48.956 +05:45 [INF] Starting host...
2020-05-24 15:13:56.179 +05:45 [INF] Starting IdentityServer4 version 3.1.0.0
2020-05-24 15:13:56.638 +05:45 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-05-24 15:13:56.641 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-05-24 15:13:56.641 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-05-24 15:13:56.642 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-05-24 15:13:56.643 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-05-24 15:13:56.644 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-05-24 15:13:58.644 +05:45 [DBG] Login Url: /Account/Login
2020-05-24 15:13:58.649 +05:45 [DBG] Login Return Url Parameter: ReturnUrl
2020-05-24 15:13:58.650 +05:45 [DBG] Logout Url: /Account/Logout
2020-05-24 15:13:58.652 +05:45 [DBG] ConsentUrl Url: /consent
2020-05-24 15:13:58.653 +05:45 [DBG] Consent Return Url Parameter: returnUrl
2020-05-24 15:13:58.654 +05:45 [DBG] Error Url: /home/error
2020-05-24 15:13:58.655 +05:45 [DBG] Error Id Parameter: errorId
2020-05-24 15:14:04.039 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://tenant1.lalita.com:4200
2020-05-24 15:14:22.053 +05:45 [ERR] An error occurred using the connection to database 'Auth' on server 'yoursqlserver'.
2020-05-24 15:14:22.296 +05:45 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2020-05-24 15:14:22.379 +05:45 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (53): The network path was not found.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin)
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>g__InvokeCoreAwaited|15_0(HttpContext context, Task`1 policyTask)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:53,State:0,Class:20
2020-05-24 15:14:58.433 +05:45 [INF] Starting host...
2020-05-24 15:15:02.571 +05:45 [INF] Starting IdentityServer4 version 3.1.0.0
2020-05-24 15:15:03.053 +05:45 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-05-24 15:15:03.055 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-05-24 15:15:03.055 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-05-24 15:15:03.056 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-05-24 15:15:03.057 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-05-24 15:15:03.057 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-05-24 15:15:04.645 +05:45 [DBG] Login Url: /Account/Login
2020-05-24 15:15:04.652 +05:45 [DBG] Login Return Url Parameter: ReturnUrl
2020-05-24 15:15:04.653 +05:45 [DBG] Logout Url: /Account/Logout
2020-05-24 15:15:04.654 +05:45 [DBG] ConsentUrl Url: /consent
2020-05-24 15:15:04.655 +05:45 [DBG] Consent Return Url Parameter: returnUrl
2020-05-24 15:15:04.656 +05:45 [DBG] Error Url: /home/error
2020-05-24 15:15:04.657 +05:45 [DBG] Error Id Parameter: errorId
2020-05-24 15:15:09.325 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:12.460 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:15:12.472 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:12.480 +05:45 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-05-24 15:15:12.528 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-05-24 15:15:12.532 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-05-24 15:15:12.539 +05:45 [DBG] Start discovery request
2020-05-24 15:15:13.940 +05:45 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2020-05-24 15:15:14.481 +05:45 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-05-24 15:15:14.491 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-05-24 15:15:14.498 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-05-24 15:15:14.504 +05:45 [DBG] Start authorize request
2020-05-24 15:15:14.570 +05:45 [DBG] No user present in authorize request
2020-05-24 15:15:14.582 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:15:15.668 +05:45 [DBG] js found in database: true
2020-05-24 15:15:15.690 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:15.766 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:15:16.005 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:16.157 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:16.204 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:16.256 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:16.282 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:15:16.325 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"6c66b83eca6f9ec063d40861fdf1fc014choFJY6n","UiLocales":null,"Nonce":"d25bcc04c92f3d59b1b0240308cf97b3edZmt7Gxt","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200","response_type":"code","scope":"openid profile web_api","nonce":"d25bcc04c92f3d59b1b0240308cf97b3edZmt7Gxt","state":"6c66b83eca6f9ec063d40861fdf1fc014choFJY6n","code_challenge":"kzg6IkMVcpWf7RZum1L4TSV0QsbORYNgbjT9wk0zqFA","code_challenge_method":"S256","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:15:16.379 +05:45 [INF] Showing login: User is not authenticated
2020-05-24 15:15:16.673 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:15:16.822 +05:45 [DBG] js found in database: true
2020-05-24 15:15:16.824 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:16.831 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:15:16.853 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:16.946 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:16.968 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:17.069 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:17.078 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:15:17.182 +05:45 [DBG] js found in database: true
2020-05-24 15:15:17.184 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:24.416 +05:45 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-05-24 15:15:24.590 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:15:24.699 +05:45 [DBG] js found in database: true
2020-05-24 15:15:24.701 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:24.706 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:15:24.723 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:24.773 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:24.790 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:24.804 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:24.807 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:15:25.541 +05:45 [DBG] Augmenting SignInContext
2020-05-24 15:15:25.546 +05:45 [DBG] Adding idp claim with value: local
2020-05-24 15:15:25.547 +05:45 [DBG] Adding auth_time claim with value: 1590312625
2020-05-24 15:15:25.589 +05:45 [INF] AuthenticationScheme: Identity.Application signed in.
2020-05-24 15:15:25.623 +05:45 [INF] {"Username":"lalita","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"lalita","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLVVOK4VSCCV:00000003","TimeStamp":"2020-05-24T09:30:25.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-05-24 15:15:25.738 +05:45 [DBG] js found in database: true
2020-05-24 15:15:25.741 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:25.827 +05:45 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-05-24 15:15:25.835 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-05-24 15:15:25.837 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-05-24 15:15:25.846 +05:45 [DBG] Start authorize callback request
2020-05-24 15:15:25.874 +05:45 [DBG] User in authorize request: 1
2020-05-24 15:15:25.875 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:15:25.968 +05:45 [DBG] js found in database: true
2020-05-24 15:15:25.969 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:25.973 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:15:26.003 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:26.080 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:26.120 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:26.189 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:26.197 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:15:26.200 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"6c66b83eca6f9ec063d40861fdf1fc014choFJY6n","UiLocales":null,"Nonce":"d25bcc04c92f3d59b1b0240308cf97b3edZmt7Gxt","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"GjTimoZkVUwNzMWNS8FX9g","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200","response_type":"code","scope":"openid profile web_api","nonce":"d25bcc04c92f3d59b1b0240308cf97b3edZmt7Gxt","state":"6c66b83eca6f9ec063d40861fdf1fc014choFJY6n","code_challenge":"kzg6IkMVcpWf7RZum1L4TSV0QsbORYNgbjT9wk0zqFA","code_challenge_method":"S256","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:15:26.484 +05:45 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: true
2020-05-24 15:15:26.672 +05:45 [DBG] Consent found in consent store is same as current request, consent is not required
2020-05-24 15:15:26.686 +05:45 [DBG] Creating Authorization Code Flow response.
2020-05-24 15:15:26.784 +05:45 [DBG] KR7QLwHnnomeJK8Q+epUsKfe8dnWSsEveJKKVFWNIbs= not found in database
2020-05-24 15:15:27.200 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****2Cbk","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCCV:00000004","TimeStamp":"2020-05-24T09:30:27.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:15:27.215 +05:45 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://tenant1.lalita.com:4200","State":"6c66b83eca6f9ec063d40861fdf1fc014choFJY6n","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-05-24 15:15:27.240 +05:45 [DBG] Augmenting SignInContext
2020-05-24 15:15:27.242 +05:45 [INF] AuthenticationScheme: Identity.Application signed in.
2020-05-24 15:15:28.159 +05:45 [DBG] CORS request made for path: /connect/token from origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:28.179 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:15:28.182 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:28.217 +05:45 [DBG] Request path /connect/token matched to endpoint type Token
2020-05-24 15:15:28.233 +05:45 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-05-24 15:15:28.236 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-05-24 15:15:28.252 +05:45 [DBG] Start token request.
2020-05-24 15:15:28.258 +05:45 [DBG] Start client validation
2020-05-24 15:15:28.273 +05:45 [DBG] Start parsing Basic Authentication secret
2020-05-24 15:15:28.279 +05:45 [DBG] Start parsing for secret in post body
2020-05-24 15:15:28.287 +05:45 [DBG] client id without secret found
2020-05-24 15:15:28.294 +05:45 [DBG] Parser found secret: PostBodySecretParser
2020-05-24 15:15:28.296 +05:45 [DBG] Secret id found: js
2020-05-24 15:15:28.424 +05:45 [DBG] js found in database: true
2020-05-24 15:15:28.425 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:28.437 +05:45 [DBG] Public Client - skipping secret validation success
2020-05-24 15:15:28.438 +05:45 [DBG] Client validation success
2020-05-24 15:15:28.452 +05:45 [INF] {"ClientId":"js","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLVVOK4VSCCS:00000002","TimeStamp":"2020-05-24T09:30:28.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2020-05-24 15:15:28.467 +05:45 [DBG] Start token request validation
2020-05-24 15:15:28.487 +05:45 [DBG] Start validation of authorization code token request
2020-05-24 15:15:28.512 +05:45 [DBG] KR7QLwHnnomeJK8Q+epUsKfe8dnWSsEveJKKVFWNIbs= found in database: true
2020-05-24 15:15:28.596 +05:45 [DBG] removing KR7QLwHnnomeJK8Q+epUsKfe8dnWSsEveJKKVFWNIbs= persisted grant from database
2020-05-24 15:15:28.654 +05:45 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-05-24 15:15:28.704 +05:45 [DBG] Validation of authorization code token request success
2020-05-24 15:15:28.735 +05:45 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"d0Udbb9cCmZuwXOpYQWbUFEy67gdnkIXXQEOKbA2Cbk","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","client_id":"js","code_verifier":"0b308765ce038819029ca9245933928df41894450ebab6de4acde0875d68Q7IyTkd","code":"d0Udbb9cCmZuwXOpYQWbUFEy67gdnkIXXQEOKbA2Cbk","redirect_uri":"http://tenant1.lalita.com:4200"},"$type":"TokenRequestValidationLog"}
2020-05-24 15:15:28.878 +05:45 [DBG] js found in database: true
2020-05-24 15:15:28.879 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:28.902 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:28.953 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:28.984 +05:45 [DBG] Getting claims for access token for client: js
2020-05-24 15:15:28.986 +05:45 [DBG] Getting claims for access token for subject: 1
2020-05-24 15:15:29.214 +05:45 [DBG] js found in database: true
2020-05-24 15:15:29.215 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:29.229 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:29.273 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:15:29.292 +05:45 [DBG] Getting claims for identity token for subject: 1 and client: js
2020-05-24 15:15:29.294 +05:45 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-05-24 15:15:29.305 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****eH0g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4PHQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCCS:00000002","TimeStamp":"2020-05-24T09:30:29.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:15:29.313 +05:45 [DBG] Token request success.
2020-05-24 15:15:29.364 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:29.377 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:15:29.379 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:29.385 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:15:29.387 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:15:29.389 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:15:29.394 +05:45 [DBG] Start key discovery request
2020-05-24 15:15:29.497 +05:45 [DBG] CORS request made for path: /connect/userinfo from origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:29.510 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:15:29.511 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:15:29.514 +05:45 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-05-24 15:15:29.518 +05:45 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-05-24 15:15:29.520 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-05-24 15:15:29.530 +05:45 [DBG] Start userinfo request
2020-05-24 15:15:29.535 +05:45 [DBG] Bearer token found in header
2020-05-24 15:15:29.791 +05:45 [DBG] js found in database: true
2020-05-24 15:15:29.792 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:29.938 +05:45 [DBG] js found in database: true
2020-05-24 15:15:29.939 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:15:29.955 +05:45 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-05-24 15:15:29.960 +05:45 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1590312629,"exp":1590316229,"iss":"http://tenant1.lalita.com:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1590312625,"idp":"local","TenantId":"tenant1","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-05-24 15:15:29.979 +05:45 [DBG] Creating userinfo response
2020-05-24 15:15:29.990 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:15:29.993 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:15:30.026 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:30.060 +05:45 [DBG] Requested claim types: sub email website given_name family_name name
2020-05-24 15:15:30.062 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:15:30.066 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:15:30.085 +05:45 [INF] Profile service returned the following claim types: sub name given_name family_name email website email TenantId
2020-05-24 15:15:30.089 +05:45 [DBG] End userinfo request
2020-05-24 15:20:30.335 +05:45 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-05-24 15:20:30.346 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-05-24 15:20:30.349 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-05-24 15:20:30.353 +05:45 [DBG] Start authorize request
2020-05-24 15:20:30.354 +05:45 [DBG] User in authorize request: 1
2020-05-24 15:20:30.355 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:20:30.507 +05:45 [DBG] js found in database: true
2020-05-24 15:20:30.509 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:20:30.515 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:20:30.529 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:20:30.577 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:20:30.593 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:20:30.627 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:20:30.634 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:20:30.636 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"48df097b0099441aaa56fb2ad5ce4f4f3afcpk7vp","UiLocales":null,"Nonce":"4e967fcf14aac528979c6f23af82755a39iPGiHAn","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"GjTimoZkVUwNzMWNS8FX9g","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html","response_type":"code","scope":"openid profile web_api","nonce":"4e967fcf14aac528979c6f23af82755a39iPGiHAn","state":"48df097b0099441aaa56fb2ad5ce4f4f3afcpk7vp","code_challenge":"4kjRjxx7SwLu_LPFzFjbf9VoZ9moz8Ercj-Qveqt68k","code_challenge_method":"S256","prompt":"none","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:20:30.676 +05:45 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: true
2020-05-24 15:20:30.682 +05:45 [DBG] Consent found in consent store is same as current request, consent is not required
2020-05-24 15:20:30.683 +05:45 [DBG] Creating Authorization Code Flow response.
2020-05-24 15:20:30.690 +05:45 [DBG] Clx+8BRmn+NAfwqIHzQUmMP3N+efuTTJOk0x61Uyxl0= not found in database
2020-05-24 15:20:30.706 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****zbok","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD1:00000001","TimeStamp":"2020-05-24T09:35:30.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:20:30.717 +05:45 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","State":"48df097b0099441aaa56fb2ad5ce4f4f3afcpk7vp","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-05-24 15:20:30.803 +05:45 [DBG] CORS request made for path: /connect/token from origin: http://tenant1.lalita.com:4200
2020-05-24 15:20:30.817 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:20:30.819 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:20:30.821 +05:45 [DBG] Request path /connect/token matched to endpoint type Token
2020-05-24 15:20:30.823 +05:45 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-05-24 15:20:30.825 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-05-24 15:20:30.832 +05:45 [DBG] Start token request.
2020-05-24 15:20:30.833 +05:45 [DBG] Start client validation
2020-05-24 15:20:30.834 +05:45 [DBG] Start parsing Basic Authentication secret
2020-05-24 15:20:30.835 +05:45 [DBG] Start parsing for secret in post body
2020-05-24 15:20:30.837 +05:45 [DBG] client id without secret found
2020-05-24 15:20:30.837 +05:45 [DBG] Parser found secret: PostBodySecretParser
2020-05-24 15:20:30.838 +05:45 [DBG] Secret id found: js
2020-05-24 15:20:30.928 +05:45 [DBG] js found in database: true
2020-05-24 15:20:30.930 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:20:30.934 +05:45 [DBG] Public Client - skipping secret validation success
2020-05-24 15:20:30.936 +05:45 [DBG] Client validation success
2020-05-24 15:20:30.937 +05:45 [INF] {"ClientId":"js","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLVVOK4VSCD2:00000002","TimeStamp":"2020-05-24T09:35:30.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2020-05-24 15:20:30.947 +05:45 [DBG] Start token request validation
2020-05-24 15:20:30.948 +05:45 [DBG] Start validation of authorization code token request
2020-05-24 15:20:30.954 +05:45 [DBG] Clx+8BRmn+NAfwqIHzQUmMP3N+efuTTJOk0x61Uyxl0= found in database: true
2020-05-24 15:20:30.977 +05:45 [DBG] removing Clx+8BRmn+NAfwqIHzQUmMP3N+efuTTJOk0x61Uyxl0= persisted grant from database
2020-05-24 15:20:30.989 +05:45 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-05-24 15:20:30.999 +05:45 [DBG] Validation of authorization code token request success
2020-05-24 15:20:31.001 +05:45 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"H_sojhK0nkOyXquTJyNFxFVhDXzYfnDMSFFvtfxzbok","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","client_id":"js","code_verifier":"29242b507105b652a7bf7cc97a7b84a2329f53ade29a270fd543e8fb5ff3iAmj0of","code":"H_sojhK0nkOyXquTJyNFxFVhDXzYfnDMSFFvtfxzbok","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html"},"$type":"TokenRequestValidationLog"}
2020-05-24 15:20:31.090 +05:45 [DBG] js found in database: true
2020-05-24 15:20:31.091 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:20:31.110 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:20:31.151 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:20:31.156 +05:45 [DBG] Getting claims for access token for client: js
2020-05-24 15:20:31.157 +05:45 [DBG] Getting claims for access token for subject: 1
2020-05-24 15:20:31.256 +05:45 [DBG] js found in database: true
2020-05-24 15:20:31.257 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:20:31.273 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:20:31.314 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:20:31.318 +05:45 [DBG] Getting claims for identity token for subject: 1 and client: js
2020-05-24 15:20:31.320 +05:45 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-05-24 15:20:31.325 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****-LGg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****U3uw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD2:00000002","TimeStamp":"2020-05-24T09:35:31.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:20:31.337 +05:45 [DBG] Token request success.
2020-05-24 15:20:31.362 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://tenant1.lalita.com:4200
2020-05-24 15:20:31.373 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:20:31.377 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:20:31.381 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:20:31.383 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:20:31.387 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:20:31.388 +05:45 [DBG] Start key discovery request
2020-05-24 15:25:33.426 +05:45 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-05-24 15:25:33.522 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-05-24 15:25:33.527 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-05-24 15:25:33.530 +05:45 [DBG] Start authorize request
2020-05-24 15:25:33.531 +05:45 [DBG] User in authorize request: 1
2020-05-24 15:25:33.532 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:25:33.746 +05:45 [DBG] js found in database: true
2020-05-24 15:25:33.748 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:25:33.752 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:25:33.768 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:25:33.802 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:25:33.819 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:25:33.864 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:25:33.870 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:25:33.874 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"46cae8bb86229fd8ba387373b48b1e3c55OpjMnYF","UiLocales":null,"Nonce":"6157eeb111cff731e22507e5513874d962MahKCFT","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"GjTimoZkVUwNzMWNS8FX9g","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html","response_type":"code","scope":"openid profile web_api","nonce":"6157eeb111cff731e22507e5513874d962MahKCFT","state":"46cae8bb86229fd8ba387373b48b1e3c55OpjMnYF","code_challenge":"UYMSaLM1RvFBvQNa_uyDzWyV8lmVnkmasAIt4x-giQM","code_challenge_method":"S256","prompt":"none","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:25:33.913 +05:45 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: true
2020-05-24 15:25:33.917 +05:45 [DBG] Consent found in consent store is same as current request, consent is not required
2020-05-24 15:25:33.919 +05:45 [DBG] Creating Authorization Code Flow response.
2020-05-24 15:25:33.926 +05:45 [DBG] kjlpNTk0/SV3BXFdkTc+mN9STp70izrou8tDcH6RSTU= not found in database
2020-05-24 15:25:33.939 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****YkB0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD3:00000001","TimeStamp":"2020-05-24T09:40:33.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:25:33.951 +05:45 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","State":"46cae8bb86229fd8ba387373b48b1e3c55OpjMnYF","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-05-24 15:25:34.040 +05:45 [DBG] CORS request made for path: /connect/token from origin: http://tenant1.lalita.com:4200
2020-05-24 15:25:34.064 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:25:34.066 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:25:34.073 +05:45 [DBG] Request path /connect/token matched to endpoint type Token
2020-05-24 15:25:34.108 +05:45 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-05-24 15:25:34.111 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-05-24 15:25:34.118 +05:45 [DBG] Start token request.
2020-05-24 15:25:34.119 +05:45 [DBG] Start client validation
2020-05-24 15:25:34.126 +05:45 [DBG] Start parsing Basic Authentication secret
2020-05-24 15:25:34.127 +05:45 [DBG] Start parsing for secret in post body
2020-05-24 15:25:34.134 +05:45 [DBG] client id without secret found
2020-05-24 15:25:34.137 +05:45 [DBG] Parser found secret: PostBodySecretParser
2020-05-24 15:25:34.138 +05:45 [DBG] Secret id found: js
2020-05-24 15:25:34.238 +05:45 [DBG] js found in database: true
2020-05-24 15:25:34.239 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:25:34.245 +05:45 [DBG] Public Client - skipping secret validation success
2020-05-24 15:25:34.247 +05:45 [DBG] Client validation success
2020-05-24 15:25:34.248 +05:45 [INF] {"ClientId":"js","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLVVOK4VSCD4:00000002","TimeStamp":"2020-05-24T09:40:34.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2020-05-24 15:25:34.258 +05:45 [DBG] Start token request validation
2020-05-24 15:25:34.259 +05:45 [DBG] Start validation of authorization code token request
2020-05-24 15:25:34.270 +05:45 [DBG] kjlpNTk0/SV3BXFdkTc+mN9STp70izrou8tDcH6RSTU= found in database: true
2020-05-24 15:25:34.281 +05:45 [DBG] removing kjlpNTk0/SV3BXFdkTc+mN9STp70izrou8tDcH6RSTU= persisted grant from database
2020-05-24 15:25:34.290 +05:45 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-05-24 15:25:34.301 +05:45 [DBG] Validation of authorization code token request success
2020-05-24 15:25:34.303 +05:45 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"vnsb1mmfy2Cd839JytZHRBiS-Q9WdhFsomaoZ1dYkB0","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","client_id":"js","code_verifier":"832103b0d9a5a33a3102edb7a37bbd437822333049a4f385a1390841754aeul2W5D","code":"vnsb1mmfy2Cd839JytZHRBiS-Q9WdhFsomaoZ1dYkB0","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html"},"$type":"TokenRequestValidationLog"}
2020-05-24 15:25:34.402 +05:45 [DBG] js found in database: true
2020-05-24 15:25:34.403 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:25:34.417 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:25:34.459 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:25:34.464 +05:45 [DBG] Getting claims for access token for client: js
2020-05-24 15:25:34.465 +05:45 [DBG] Getting claims for access token for subject: 1
2020-05-24 15:25:34.551 +05:45 [DBG] js found in database: true
2020-05-24 15:25:34.552 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:25:34.568 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:25:34.624 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:25:34.639 +05:45 [DBG] Getting claims for identity token for subject: 1 and client: js
2020-05-24 15:25:34.656 +05:45 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-05-24 15:25:34.664 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****YSSg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-eTQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD4:00000002","TimeStamp":"2020-05-24T09:40:34.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:25:34.678 +05:45 [DBG] Token request success.
2020-05-24 15:25:34.699 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://tenant1.lalita.com:4200
2020-05-24 15:25:34.708 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:25:34.712 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:25:34.714 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:25:34.766 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:25:34.768 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:25:34.771 +05:45 [DBG] Start key discovery request
2020-05-24 15:30:34.313 +05:45 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-05-24 15:30:34.349 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-05-24 15:30:34.353 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-05-24 15:30:34.358 +05:45 [DBG] Start authorize request
2020-05-24 15:30:34.365 +05:45 [DBG] User in authorize request: 1
2020-05-24 15:30:34.367 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:30:34.639 +05:45 [DBG] js found in database: true
2020-05-24 15:30:34.643 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:30:34.647 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:30:34.681 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:30:34.819 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:30:34.844 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:30:34.888 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:30:34.895 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:30:34.906 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"c873e8fcaf54c6df2484aa26e2aff3eb1a2iKUk6l","UiLocales":null,"Nonce":"008a59ba31adf716e13aa2ff6d249878cbcl4zZA0","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"GjTimoZkVUwNzMWNS8FX9g","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html","response_type":"code","scope":"openid profile web_api","nonce":"008a59ba31adf716e13aa2ff6d249878cbcl4zZA0","state":"c873e8fcaf54c6df2484aa26e2aff3eb1a2iKUk6l","code_challenge":"xkqkEgltSTmu9fQzFIKJ-fIQ_VD7-G2dBKyNElYDcTY","code_challenge_method":"S256","prompt":"none","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:30:34.975 +05:45 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: true
2020-05-24 15:30:34.992 +05:45 [DBG] Consent found in consent store is same as current request, consent is not required
2020-05-24 15:30:34.995 +05:45 [DBG] Creating Authorization Code Flow response.
2020-05-24 15:30:35.008 +05:45 [DBG] +RD01BkJPUhhfU4hZZFSKzKoTgX/tnER4cIwdky+e3A= not found in database
2020-05-24 15:30:35.064 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****Tbb8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD5:00000001","TimeStamp":"2020-05-24T09:45:35.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:30:35.074 +05:45 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://tenant1.lalita.com:4200/silent-renew.html","State":"c873e8fcaf54c6df2484aa26e2aff3eb1a2iKUk6l","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-05-24 15:30:35.331 +05:45 [DBG] CORS request made for path: /connect/token from origin: http://tenant1.lalita.com:4200
2020-05-24 15:30:35.348 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:30:35.351 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:30:35.355 +05:45 [DBG] Request path /connect/token matched to endpoint type Token
2020-05-24 15:30:35.361 +05:45 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-05-24 15:30:35.363 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-05-24 15:30:35.366 +05:45 [DBG] Start token request.
2020-05-24 15:30:35.371 +05:45 [DBG] Start client validation
2020-05-24 15:30:35.373 +05:45 [DBG] Start parsing Basic Authentication secret
2020-05-24 15:30:35.374 +05:45 [DBG] Start parsing for secret in post body
2020-05-24 15:30:35.378 +05:45 [DBG] client id without secret found
2020-05-24 15:30:35.382 +05:45 [DBG] Parser found secret: PostBodySecretParser
2020-05-24 15:30:35.383 +05:45 [DBG] Secret id found: js
2020-05-24 15:30:35.544 +05:45 [DBG] js found in database: true
2020-05-24 15:30:35.546 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:30:35.550 +05:45 [DBG] Public Client - skipping secret validation success
2020-05-24 15:30:35.551 +05:45 [DBG] Client validation success
2020-05-24 15:30:35.553 +05:45 [INF] {"ClientId":"js","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLVVOK4VSCD6:00000002","TimeStamp":"2020-05-24T09:45:35.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2020-05-24 15:30:35.564 +05:45 [DBG] Start token request validation
2020-05-24 15:30:35.564 +05:45 [DBG] Start validation of authorization code token request
2020-05-24 15:30:35.575 +05:45 [DBG] +RD01BkJPUhhfU4hZZFSKzKoTgX/tnER4cIwdky+e3A= found in database: true
2020-05-24 15:30:35.588 +05:45 [DBG] removing +RD01BkJPUhhfU4hZZFSKzKoTgX/tnER4cIwdky+e3A= persisted grant from database
2020-05-24 15:30:35.606 +05:45 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-05-24 15:30:35.619 +05:45 [DBG] Validation of authorization code token request success
2020-05-24 15:30:35.622 +05:45 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"tQJAtht307dHC1IqFJ0CUrEp2pq2VdiB7_MXKoCTbb8","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","client_id":"js","code_verifier":"a3d445d7d74bd2622fa97e96fce102f4d51f9dd577066a8a549dc3e96adbiG1XcUn","code":"tQJAtht307dHC1IqFJ0CUrEp2pq2VdiB7_MXKoCTbb8","redirect_uri":"http://tenant1.lalita.com:4200/silent-renew.html"},"$type":"TokenRequestValidationLog"}
2020-05-24 15:30:35.726 +05:45 [DBG] js found in database: true
2020-05-24 15:30:35.727 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:30:35.746 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:30:35.830 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:30:35.866 +05:45 [DBG] Getting claims for access token for client: js
2020-05-24 15:30:35.867 +05:45 [DBG] Getting claims for access token for subject: 1
2020-05-24 15:30:36.022 +05:45 [DBG] js found in database: true
2020-05-24 15:30:36.023 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:30:36.044 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:30:36.088 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:30:36.093 +05:45 [DBG] Getting claims for identity token for subject: 1 and client: js
2020-05-24 15:30:36.095 +05:45 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-05-24 15:30:36.104 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****MdaQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****n-NQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOK4VSCD6:00000002","TimeStamp":"2020-05-24T09:45:36.0000000Z","ProcessId":14332,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:30:36.128 +05:45 [DBG] Token request success.
2020-05-24 15:30:36.174 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://tenant1.lalita.com:4200
2020-05-24 15:30:36.189 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:30:36.191 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:30:36.194 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:30:36.197 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:30:36.210 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:30:36.212 +05:45 [DBG] Start key discovery request
2020-05-24 15:31:10.801 +05:45 [INF] Starting host...
2020-05-24 15:31:15.784 +05:45 [INF] Starting IdentityServer4 version 3.1.0.0
2020-05-24 15:31:16.310 +05:45 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-05-24 15:31:16.312 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-05-24 15:31:16.312 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-05-24 15:31:16.313 +05:45 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-05-24 15:31:16.314 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-05-24 15:31:16.314 +05:45 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-05-24 15:31:18.888 +05:45 [DBG] Login Url: /Account/Login
2020-05-24 15:31:18.895 +05:45 [DBG] Login Return Url Parameter: ReturnUrl
2020-05-24 15:31:18.896 +05:45 [DBG] Logout Url: /Account/Logout
2020-05-24 15:31:18.898 +05:45 [DBG] ConsentUrl Url: /consent
2020-05-24 15:31:18.899 +05:45 [DBG] Consent Return Url Parameter: returnUrl
2020-05-24 15:31:18.900 +05:45 [DBG] Error Url: /home/error
2020-05-24 15:31:18.902 +05:45 [DBG] Error Id Parameter: errorId
2020-05-24 15:31:31.268 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:34.776 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:31:34.785 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:34.790 +05:45 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-05-24 15:31:34.835 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-05-24 15:31:34.839 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-05-24 15:31:34.847 +05:45 [DBG] Start discovery request
2020-05-24 15:31:36.303 +05:45 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2020-05-24 15:31:36.799 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:36.899 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:31:36.902 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:36.919 +05:45 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-05-24 15:31:36.922 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-05-24 15:31:36.943 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-05-24 15:31:36.946 +05:45 [DBG] Start discovery request
2020-05-24 15:31:36.975 +05:45 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2020-05-24 15:31:37.079 +05:45 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-05-24 15:31:37.091 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-05-24 15:31:37.093 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-05-24 15:31:37.102 +05:45 [DBG] Start authorize request
2020-05-24 15:31:37.116 +05:45 [DBG] No user present in authorize request
2020-05-24 15:31:37.124 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:31:38.137 +05:45 [DBG] js found in database: true
2020-05-24 15:31:38.159 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:38.181 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:31:38.357 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:38.527 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:38.577 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:38.590 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:38.614 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:31:38.679 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"4a9447e4a4caf37297fad66077f137e0aaqBHzz2G","UiLocales":null,"Nonce":"7e171f12c5dd263a77a6d4bb4708462861OcbbRsF","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200","response_type":"code","scope":"openid profile web_api","nonce":"7e171f12c5dd263a77a6d4bb4708462861OcbbRsF","state":"4a9447e4a4caf37297fad66077f137e0aaqBHzz2G","code_challenge":"uYlFb6kty9vhPKpfZBHiWFl49MwEG3F7mjU0z61rt-I","code_challenge_method":"S256","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:31:38.720 +05:45 [INF] Showing login: User is not authenticated
2020-05-24 15:31:39.018 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:31:39.116 +05:45 [DBG] js found in database: true
2020-05-24 15:31:39.117 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:39.121 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:31:39.137 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:39.182 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:39.198 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:39.267 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:39.275 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:31:39.377 +05:45 [DBG] js found in database: true
2020-05-24 15:31:39.378 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:42.966 +05:45 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2020-05-24 15:31:43.184 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:31:43.291 +05:45 [DBG] js found in database: true
2020-05-24 15:31:43.292 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:43.297 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:31:43.329 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:43.406 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:43.428 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:43.466 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:43.470 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:31:44.026 +05:45 [DBG] Augmenting SignInContext
2020-05-24 15:31:44.030 +05:45 [DBG] Adding idp claim with value: local
2020-05-24 15:31:44.031 +05:45 [DBG] Adding auth_time claim with value: 1590313604
2020-05-24 15:31:44.065 +05:45 [INF] AuthenticationScheme: Identity.Application signed in.
2020-05-24 15:31:44.092 +05:45 [INF] {"Username":"lalita","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"lalita","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLVVOT74O4E2:00000001","TimeStamp":"2020-05-24T09:46:44.0000000Z","ProcessId":19604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2020-05-24 15:31:44.239 +05:45 [DBG] js found in database: true
2020-05-24 15:31:44.240 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:44.348 +05:45 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-05-24 15:31:44.354 +05:45 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-05-24 15:31:44.356 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-05-24 15:31:44.363 +05:45 [DBG] Start authorize callback request
2020-05-24 15:31:44.372 +05:45 [DBG] User in authorize request: 1
2020-05-24 15:31:44.373 +05:45 [DBG] Start authorize request protocol validation
2020-05-24 15:31:44.483 +05:45 [DBG] js found in database: true
2020-05-24 15:31:44.484 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:44.495 +05:45 [DBG] Checking for PKCE parameters
2020-05-24 15:31:44.511 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:44.580 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:44.615 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:44.679 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:44.686 +05:45 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-05-24 15:31:44.691 +05:45 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","AllowedRedirectUris":["http://tenant1.lalita.com:4200/callback.html","http://tenant2.lalita.com:4200/callback.html","http://tenant1.lalita.com:4200","http://tenant2.lalita.com:4200","http://tenant1.lalita.com:4200/silent-renew.html","http://tenant2.lalita.com:4200/silent-renew.html"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"4a9447e4a4caf37297fad66077f137e0aaqBHzz2G","UiLocales":null,"Nonce":"7e171f12c5dd263a77a6d4bb4708462861OcbbRsF","AuthenticationContextReferenceClasses":["tenant:tenant1"],"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"fWp_FrsqtcfhEP35Bc8j6Q","Raw":{"client_id":"js","redirect_uri":"http://tenant1.lalita.com:4200","response_type":"code","scope":"openid profile web_api","nonce":"7e171f12c5dd263a77a6d4bb4708462861OcbbRsF","state":"4a9447e4a4caf37297fad66077f137e0aaqBHzz2G","code_challenge":"uYlFb6kty9vhPKpfZBHiWFl49MwEG3F7mjU0z61rt-I","code_challenge_method":"S256","acr_values":"tenant:tenant1"},"$type":"AuthorizeRequestValidationLog"}
2020-05-24 15:31:44.848 +05:45 [DBG] BySjdvv4GBgV8WliEeTNDX9VVXYbZaV8EcrCFaY8rnM= found in database: true
2020-05-24 15:31:44.997 +05:45 [DBG] Consent found in consent store is same as current request, consent is not required
2020-05-24 15:31:45.008 +05:45 [DBG] Creating Authorization Code Flow response.
2020-05-24 15:31:45.119 +05:45 [DBG] AF5sz0AsMz+qkyZMRnl/ntk+W0V8buW665CNA+ySPwc= not found in database
2020-05-24 15:31:45.591 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://tenant1.lalita.com:4200","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****f-qc","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOT74O4E2:00000002","TimeStamp":"2020-05-24T09:46:45.0000000Z","ProcessId":19604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:31:45.605 +05:45 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://tenant1.lalita.com:4200","State":"4a9447e4a4caf37297fad66077f137e0aaqBHzz2G","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-05-24 15:31:45.645 +05:45 [DBG] Augmenting SignInContext
2020-05-24 15:31:45.648 +05:45 [INF] AuthenticationScheme: Identity.Application signed in.
2020-05-24 15:31:46.259 +05:45 [DBG] CORS request made for path: /connect/token from origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:46.280 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:31:46.286 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:46.289 +05:45 [DBG] Request path /connect/token matched to endpoint type Token
2020-05-24 15:31:46.305 +05:45 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-05-24 15:31:46.308 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-05-24 15:31:46.323 +05:45 [DBG] Start token request.
2020-05-24 15:31:46.337 +05:45 [DBG] Start client validation
2020-05-24 15:31:46.357 +05:45 [DBG] Start parsing Basic Authentication secret
2020-05-24 15:31:46.371 +05:45 [DBG] Start parsing for secret in post body
2020-05-24 15:31:46.375 +05:45 [DBG] client id without secret found
2020-05-24 15:31:46.383 +05:45 [DBG] Parser found secret: PostBodySecretParser
2020-05-24 15:31:46.385 +05:45 [DBG] Secret id found: js
2020-05-24 15:31:46.537 +05:45 [DBG] js found in database: true
2020-05-24 15:31:46.539 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:46.547 +05:45 [DBG] Public Client - skipping secret validation success
2020-05-24 15:31:46.547 +05:45 [DBG] Client validation success
2020-05-24 15:31:46.555 +05:45 [INF] {"ClientId":"js","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLVVOT74O4E3:00000001","TimeStamp":"2020-05-24T09:46:46.0000000Z","ProcessId":19604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2020-05-24 15:31:46.571 +05:45 [DBG] Start token request validation
2020-05-24 15:31:46.584 +05:45 [DBG] Start validation of authorization code token request
2020-05-24 15:31:46.640 +05:45 [DBG] AF5sz0AsMz+qkyZMRnl/ntk+W0V8buW665CNA+ySPwc= found in database: true
2020-05-24 15:31:46.719 +05:45 [DBG] removing AF5sz0AsMz+qkyZMRnl/ntk+W0V8buW665CNA+ySPwc= persisted grant from database
2020-05-24 15:31:46.766 +05:45 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-05-24 15:31:46.781 +05:45 [DBG] Validation of authorization code token request success
2020-05-24 15:31:46.792 +05:45 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"1Z39mcAhOmbqCXA3dp1xQJGcjHJGccku3Qtt64Hf-qc","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","client_id":"js","code_verifier":"bcc7a6ec91c3494fc18215cd641c9921039f0efcd1d728e44b43004cdceah6kXif9","code":"1Z39mcAhOmbqCXA3dp1xQJGcjHJGccku3Qtt64Hf-qc","redirect_uri":"http://tenant1.lalita.com:4200"},"$type":"TokenRequestValidationLog"}
2020-05-24 15:31:46.976 +05:45 [DBG] js found in database: true
2020-05-24 15:31:46.978 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:47.003 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:47.052 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:47.086 +05:45 [DBG] Getting claims for access token for client: js
2020-05-24 15:31:47.089 +05:45 [DBG] Getting claims for access token for subject: 1
2020-05-24 15:31:47.368 +05:45 [DBG] js found in database: true
2020-05-24 15:31:47.369 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:47.387 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:47.432 +05:45 [DBG] Found ["web_api"] API scopes in database
2020-05-24 15:31:47.453 +05:45 [DBG] Getting claims for identity token for subject: 1 and client: js
2020-05-24 15:31:47.455 +05:45 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-05-24 15:31:47.470 +05:45 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****ZrEQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****rOTg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLVVOT74O4E3:00000001","TimeStamp":"2020-05-24T09:46:47.0000000Z","ProcessId":19604,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2020-05-24 15:31:47.483 +05:45 [DBG] Token request success.
2020-05-24 15:31:47.544 +05:45 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:47.558 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:31:47.560 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:47.564 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:31:47.569 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:31:47.573 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:31:47.581 +05:45 [DBG] Start key discovery request
2020-05-24 15:31:47.744 +05:45 [DBG] CORS request made for path: /connect/userinfo from origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:47.785 +05:45 [DBG] Origin http://tenant1.lalita.com:4200 is allowed: false
2020-05-24 15:31:47.801 +05:45 [WRN] CorsPolicyService did not allow origin: http://tenant1.lalita.com:4200
2020-05-24 15:31:47.803 +05:45 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-05-24 15:31:47.807 +05:45 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-05-24 15:31:47.810 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-05-24 15:31:47.821 +05:45 [DBG] Start userinfo request
2020-05-24 15:31:47.827 +05:45 [DBG] Bearer token found in header
2020-05-24 15:31:48.084 +05:45 [DBG] js found in database: true
2020-05-24 15:31:48.085 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:48.205 +05:45 [DBG] js found in database: true
2020-05-24 15:31:48.206 +05:45 [DBG] client configuration validation for client js succeeded.
2020-05-24 15:31:48.222 +05:45 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-05-24 15:31:48.227 +05:45 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1590313607,"exp":1590317207,"iss":"http://tenant1.lalita.com:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1590313604,"idp":"local","TenantId":"tenant1","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-05-24 15:31:48.255 +05:45 [DBG] Creating userinfo response
2020-05-24 15:31:48.265 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:31:48.269 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:31:48.287 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:48.299 +05:45 [DBG] Requested claim types: sub email website given_name family_name name
2020-05-24 15:31:48.303 +05:45 [DBG] Scopes in access token: openid profile web_api
2020-05-24 15:31:48.306 +05:45 [DBG] Found ["openid","profile"] identity scopes in database
2020-05-24 15:31:48.325 +05:45 [INF] Profile service returned the following claim types: sub name given_name family_name email website email TenantId
2020-05-24 15:31:48.331 +05:45 [DBG] End userinfo request
2020-05-24 15:33:17.322 +05:45 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-05-24 15:33:17.371 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-05-24 15:33:17.375 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-05-24 15:33:17.381 +05:45 [DBG] Start discovery request
2020-05-24 15:33:17.450 +05:45 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2020-05-24 15:33:18.475 +05:45 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-05-24 15:33:18.486 +05:45 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-05-24 15:33:18.489 +05:45 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-05-24 15:33:18.497 +05:45 [DBG] Start key discovery request
